

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Place Advertisement &mdash; Marktplaats API Userguide 1.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/configurationblock.css" type="text/css" />
  
    <link rel="top" title="Marktplaats API Userguide 1.0 documentation" href="index.html"/>
        <link rel="next" title="Buying User Features" href="buying-user-features.html"/>
        <link rel="prev" title="Authentication" href="authentication.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> Marktplaats API Userguide</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication</a><ul>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#step-1-obtaining-authorization-code">Step 1: obtaining authorization code</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#step-2-retrieving-the-access-token">Step 2: Retrieving the <em>access_token</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#step-3-refreshing-the-access-token">Step 3: Refreshing the <em>access_token</em></a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Place Advertisement</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-1-get-the-attributes-for-an-category">Step 1: Get the attributes for an category</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-2-create-the-advertisement-json">Step 2: Create the advertisement JSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-3-adding-images">Step 3: Adding images</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-4-buying-features">Step 4: Buying features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-5-updating-the-advertisement">Step 5: Updating the advertisement</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-6-removing-an-advertisement">Step 6: Removing an advertisement</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="buying-user-features.html">Buying User Features</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Marktplaats API Userguide</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Place Advertisement</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/place-advertisement.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="place-advertisement">
<span id="index-0"></span><span id="id1"></span><h1>Place Advertisement<a class="headerlink" href="#place-advertisement" title="Permalink to this headline">¶</a></h1>
<p>Placing an advertisement using the Marktplaats API is at the moment only possible
in free categories, unless you have a contract with Marktplaats, in which case
advertisements are payed using an invoice. This example will show how to place an
advertisement in a free category including images.</p>
<p>In this example we use the <em>access_token</em> <tt class="docutils literal"><span class="pre">myaccesstoken</span></tt> to illustrate that
in that place the <em>access_token</em> should be filled in.</p>
<p>The full PHP example of which snippets are used in this guide can be found in this
repository in the directory <tt class="docutils literal"><span class="pre">/phpexample</span></tt>.</p>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>You need to have an <em>access_token</em> which can be used to authenticate the request
to the API. See <a class="reference internal" href="authentication.html#authentication"><em>Authentication</em></a> on how to get such a token.</p>
</div>
<div class="section" id="step-1-get-the-attributes-for-an-category">
<h2>Step 1: Get the attributes for an category<a class="headerlink" href="#step-1-get-the-attributes-for-an-category" title="Permalink to this headline">¶</a></h2>
<p>Before we can place an advertisement, we need to now which in which category we
will place the advertisement and which <em>attributes</em> we can use. <em>Attributes</em> are
nothing more than <em>fields</em> in the JSON, but which are specific for the category
the advertisement is placed in. For example, in a cars category, you can specify
the <em>constructionYear</em> or the <em>model</em>, but these fields are not available in the
books category. Some categories have mandatory fields. These fields have to be
provided when creating a new advertisement. For example, in the cd players category,
the condition attribute is mandatory.</p>
<p>To get all the categories on Marktplaats we do a GET request on the endpoint
/v1/categories:</p>
<div class="highlight-http"><div class="highlight"><pre><span class="nf">GET</span> <span class="nn">/v1/categories</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.marktplaats.nl</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">Bearer myaccesstoken</span>
</pre></div>
</div>
<p>The response is a JSON object with all top level categories on Marktplaats:</p>
<div class="highlight-json"><div class="highlight"><pre>{
  &quot;_links&quot;: {
    &quot;self&quot;: {
      &quot;href&quot;: &quot;/v1/categories&quot;
    },
    &quot;find&quot;: {
      &quot;href&quot;: &quot;/v1/categories{?categoryId}&quot;,
      &quot;templated&quot;: true
    },
    &quot;describedby&quot;: {
      &quot;href&quot;: &quot;https://api.marktplaats.nl/docs/v1/categories.html&quot;
    },
    &quot;curies&quot;: [
      {
        &quot;href&quot;: &quot;https://api.marktplaats.nl/docs/v1/rels/{rel}.html&quot;,
        &quot;templated&quot;: true,
        &quot;name&quot;: &quot;mp&quot;
      }
    ]
  },
  &quot;_embedded&quot;: {
    &quot;mp:category&quot;: [
      {
        &quot;_links&quot;: {
          &quot;self&quot;: {
            &quot;href&quot;: &quot;/v1/categories/1&quot;
          },
          &quot;up&quot;: {
            &quot;href&quot;: &quot;/v1/categories&quot;
          }
        },
      &quot;_embedded&quot;: {
        &quot;mp:category&quot;: [
          {
            &quot;_links&quot;: {
            &quot;self&quot;: {
            &quot;href&quot;: &quot;/v1/categories/1/2&quot;
            },
            &quot;up&quot;: {
            &quot;href&quot;: &quot;/v1/categories/1&quot;
            },
              &quot;mp:category-attributes&quot;: {
              &quot;href&quot;: &quot;/v1/categories/1/2/attributes&quot;
            }
            },
              &quot;categoryId&quot;: 2,
              &quot;name&quot;: &quot;Antiek | Bestek&quot;
            },
          ...
          }
        ]
      },
      ...
    ]
  }
}
</pre></div>
</div>
<p>The result above is abbreviated, but the idea is clear.</p>
<p>After we have determined which category we want to place the advertisement in,
we can get the attributes for that category and use those to create the advertisement.
For example, if we want to place an advertisement in the cd player category, we can
get the attributes for that category by doing a GET request to <tt class="docutils literal"><span class="pre">/v1/categories/31/35/attributes</span></tt></p>
<div class="highlight-http"><div class="highlight"><pre><span class="nf">GET</span> <span class="nn">/v1/categories/31/35/attributes</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.marktplaats.nl</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">Bearer myaccesstoken</span>
</pre></div>
</div>
<p>The result will be a list of attributes, where each attribute has the following
structure:</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span>
 <span class="nt">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;properties&quot;</span><span class="p">,</span>
 <span class="nt">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;Eigenschappen&quot;</span><span class="p">,</span>
 <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;LIST&quot;</span><span class="p">,</span>
 <span class="nt">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span>
   <span class="s2">&quot;Wisselaar&quot;</span><span class="p">,</span>
   <span class="s2">&quot;Draagbaar&quot;</span><span class="p">,</span>
   <span class="s2">&quot;Met radio&quot;</span>
 <span class="p">],</span>
 <span class="nt">&quot;mandatory&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
 <span class="nt">&quot;searchable&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
 <span class="nt">&quot;writable&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
 <span class="nt">&quot;updateable&quot;</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This attribute <em>properties</em> will be presented as <em>Eigenschappen</em> on the website,
and it only accepts the values listed in the <em>values</em> array. If a different value
is specified, an error will be produced. Furthermore, the attribute is not mandatory,
it is possible to search on the attribute (on the website), it can be written (which
means you can set it while placing an advertisement) and it can be updated (using a
PUT or PATCH request on the advertisement).</p>
</div>
<div class="section" id="step-2-create-the-advertisement-json">
<h2>Step 2: Create the advertisement JSON<a class="headerlink" href="#step-2-create-the-advertisement-json" title="Permalink to this headline">¶</a></h2>
<p>Based on the data for the category we want to place an advertisement in, we can construct
the json required to post an advertisement. To continue with the example of a CD player,
the JSON for a minimal advertisement should look something like this:</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span>
  <span class="nt">&quot;categoryId&quot;</span><span class="p">:</span><span class="mi">35</span><span class="p">,</span>
  <span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;Test cd player&quot;</span><span class="p">,</span>
  <span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="s2">&quot;This is an awesome cd-player&quot;</span><span class="p">,</span>
  <span class="nt">&quot;condition&quot;</span><span class="p">:</span><span class="s2">&quot;Nieuw&quot;</span><span class="p">,</span>
  <span class="nt">&quot;brand&quot;</span><span class="p">:</span><span class="s2">&quot;Sony&quot;</span><span class="p">,</span>
  <span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="s2">&quot;Draagbaar&quot;</span><span class="p">,</span>
  <span class="nt">&quot;delivery&quot;</span><span class="p">:</span><span class="s2">&quot;Ophalen&quot;</span><span class="p">,</span>
  <span class="nt">&quot;priceModel&quot;</span><span class="p">:{</span>
    <span class="nt">&quot;modelType&quot;</span><span class="p">:</span><span class="s2">&quot;fixed&quot;</span><span class="p">,</span>
    <span class="nt">&quot;askingPrice&quot;</span><span class="p">:</span><span class="mi">3241</span>
  <span class="p">},</span>
  <span class="nt">&quot;location&quot;</span><span class="p">:{</span>
    <span class="nt">&quot;postcode&quot;</span><span class="p">:</span><span class="s2">&quot;1097DN&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>There are a couple of fields which are required, regardless of the category the
advertisement is placed in: <tt class="docutils literal"><span class="pre">categoryId</span></tt>, <tt class="docutils literal"><span class="pre">title</span></tt>, <tt class="docutils literal"><span class="pre">description</span></tt>, <tt class="docutils literal"><span class="pre">priceModel</span></tt>
and <tt class="docutils literal"><span class="pre">location</span></tt>. All the other fields are optional: <tt class="docutils literal"><span class="pre">condition</span></tt>, <tt class="docutils literal"><span class="pre">brand</span></tt>,
<tt class="docutils literal"><span class="pre">properties</span></tt> and <tt class="docutils literal"><span class="pre">delivery</span></tt> are attributes of the category with id 35. Note
that the <tt class="docutils literal"><span class="pre">properties</span></tt> attribute is of the type <tt class="docutils literal"><span class="pre">LIST</span></tt>, and can also contain
a array of values instead of a single value.</p>
<p>The JSON should be send to the Marktplaats API using a <tt class="docutils literal"><span class="pre">POST</span></tt> request:</p>
<div class="highlight-http"><div class="highlight"><pre><span class="nf">POST</span> <span class="nn">/v1/advertisements</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.marktplaats.nl</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">Bearer myaccesstoken</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
    <span class="nt">&quot;categoryId&quot;</span><span class="p">:</span><span class="mi">35</span><span class="p">,</span>
    <span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;Test cd player&quot;</span><span class="p">,</span>
    <span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="s2">&quot;This is an awesome cd-player&quot;</span><span class="p">,</span>
    <span class="nt">&quot;condition&quot;</span><span class="p">:</span><span class="s2">&quot;Nieuw&quot;</span><span class="p">,</span>
    <span class="nt">&quot;brand&quot;</span><span class="p">:</span><span class="s2">&quot;Sony&quot;</span><span class="p">,</span>
    <span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="s2">&quot;Draagbaar&quot;</span><span class="p">,</span>
    <span class="nt">&quot;delivery&quot;</span><span class="p">:</span><span class="s2">&quot;Ophalen&quot;</span><span class="p">,</span>
    <span class="nt">&quot;priceModel&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;modelType&quot;</span><span class="p">:</span><span class="s2">&quot;fixed&quot;</span><span class="p">,</span>
      <span class="nt">&quot;askingPrice&quot;</span><span class="p">:</span><span class="mi">3241</span>
    <span class="p">},</span>
    <span class="nt">&quot;location&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;postcode&quot;</span><span class="p">:</span><span class="s2">&quot;1097DN&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If we do this in PHP, and we have a form which is containing the field names matching
the names of the API, it would look something like this:</p>
<div class="highlight-PHP"><div class="highlight"><pre><span class="nb">session_start</span><span class="p">();</span>

<span class="nv">$apiUrl</span> <span class="o">=</span> <span class="s1">&#39;https://api.marktplaats.nl&#39;</span><span class="p">;</span>
<span class="nv">$accessToken</span> <span class="o">=</span> <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;access_token&#39;</span><span class="p">];</span>

<span class="nv">$l1id</span><span class="o">=</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">&#39;l1id&#39;</span><span class="p">];</span>
<span class="nv">$categoryId</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;categoryId&#39;</span><span class="p">];</span>

<span class="nv">$adData</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">;</span>
<span class="nv">$fixedPrice</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;fixedPrice&#39;</span><span class="p">];</span>
<span class="nb">unset</span><span class="p">(</span><span class="nv">$adData</span><span class="p">[</span><span class="s1">&#39;fixedPrice&#39;</span><span class="p">]);</span>
<span class="nv">$adData</span><span class="p">[</span><span class="s1">&#39;priceModel&#39;</span><span class="p">][</span><span class="s1">&#39;modelType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;fixed&#39;</span><span class="p">;</span>
<span class="nv">$adData</span><span class="p">[</span><span class="s1">&#39;priceModel&#39;</span><span class="p">][</span><span class="s1">&#39;askingPrice&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">intval</span><span class="p">(</span><span class="nv">$fixedPrice</span><span class="p">);</span>
<span class="nv">$adData</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">][</span><span class="s1">&#39;postcode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$adData</span><span class="p">[</span><span class="s1">&#39;postcode&#39;</span><span class="p">];</span>
<span class="nb">unset</span><span class="p">(</span><span class="nv">$adData</span><span class="p">[</span><span class="s1">&#39;postcode&#39;</span><span class="p">]);</span>
<span class="nv">$adData</span><span class="p">[</span><span class="s1">&#39;categoryId&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">intval</span><span class="p">(</span><span class="nv">$adData</span><span class="p">[</span><span class="s1">&#39;categoryId&#39;</span><span class="p">]);</span>

<span class="nv">$attributes</span> <span class="o">=</span> <span class="nx">retrieveAttributes</span><span class="p">(</span><span class="nv">$apiUrl</span><span class="p">,</span> <span class="nv">$l1id</span><span class="p">,</span> <span class="nv">$categoryId</span><span class="p">,</span> <span class="nv">$accessToken</span><span class="p">);</span>

<span class="k">foreach</span><span class="p">(</span><span class="nv">$attributes</span><span class="o">-&gt;</span><span class="na">fields</span> <span class="k">as</span> <span class="nv">$attribute</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nv">$attribute</span><span class="o">-&gt;</span><span class="na">type</span> <span class="o">==</span> <span class="s1">&#39;NUMERIC&#39;</span> <span class="o">&amp;&amp;</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$adData</span><span class="p">[</span><span class="nv">$attribute</span><span class="o">-&gt;</span><span class="na">key</span><span class="p">]))</span> <span class="p">{</span>
    <span class="nv">$adData</span><span class="p">[</span><span class="nv">$attribute</span><span class="o">-&gt;</span><span class="na">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">intval</span><span class="p">(</span><span class="nv">$adData</span><span class="p">[</span><span class="nv">$attribute</span><span class="o">-&gt;</span><span class="na">key</span><span class="p">]);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$adJson</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$adData</span><span class="p">);</span>

<span class="nv">$url</span> <span class="o">=</span> <span class="nv">$apiUrl</span> <span class="o">.</span> <span class="s2">&quot;/v1/advertisements?_links=false&quot;</span><span class="p">;</span>
<span class="nv">$jsonresult</span> <span class="o">=</span> <span class="nx">apiCall</span><span class="p">(</span><span class="nv">$url</span><span class="p">,</span> <span class="nv">$adJson</span><span class="p">,</span> <span class="nv">$accessToken</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Most code is needed to correct the type of numeric fields (like <tt class="docutils literal"><span class="pre">categoryId</span></tt>).
Note that the snippet above lacks any form of error handling. In any production
usage of the API, errors should be handled. The API returns a common error document
which contains both machine readable as well as human readable error messages.
When the language is set correctly in the request, using the <tt class="docutils literal"><span class="pre">accept-language</span></tt>
header, the messages are returned in the correct language. At the moment the only
supported languages are Dutch and English.</p>
</div>
<div class="section" id="step-3-adding-images">
<h2>Step 3: Adding images<a class="headerlink" href="#step-3-adding-images" title="Permalink to this headline">¶</a></h2>
<p>After successfully having created an advertisement, the first thing you will usually
want to do, is attach images to your advertisement.</p>
<p>To do this you do a <tt class="docutils literal"><span class="pre">POST</span></tt> request to the images endpoint.</p>
<div class="highlight-http"><div class="highlight"><pre><span class="nf">POST</span> <span class="nn">/v1/advertisements/m1000/images</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.marktplaats.nl</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">Bearer myaccesstoken</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;urls&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;http://www.marktplaats.nl/i/common/images/marktplaats-logo.png&quot;</span><span class="p">,</span> <span class="s2">&quot;http://www.marktplaats.nl/i/common/images/mensen.jpg&quot;</span> <span class="p">],</span>
  <span class="nt">&quot;replaceAll&quot;</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json;charset=UTF-8</span>

<span class="p">{</span>
   <span class="nt">&quot;_links&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;curies&quot;</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="nt">&quot;href&quot;</span><span class="p">:</span><span class="s2">&quot;https://api.marktplaats.nl/docs/v1/rels/{rel}.html&quot;</span><span class="p">,</span>
            <span class="nt">&quot;templated&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;mp&quot;</span>
         <span class="p">}</span>
      <span class="p">]</span>
   <span class="p">},</span>
   <span class="nt">&quot;_embedded&quot;</span><span class="p">:{</span>
      <span class="nt">&quot;mp:advertisement-image&quot;</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="nt">&quot;_links&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;self&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;href&quot;</span><span class="p">:</span><span class="s2">&quot;/v1/images/7&quot;</span>
               <span class="p">},</span>
               <span class="nt">&quot;mp:image-blob&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;href&quot;</span><span class="p">:</span><span class="s2">&quot;/v1/images/7/{size}/blob&quot;</span><span class="p">,</span>
                  <span class="nt">&quot;templated&quot;</span><span class="p">:</span><span class="kc">true</span>
               <span class="p">},</span>
               <span class="nt">&quot;mp:image-meta&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;href&quot;</span><span class="p">:</span><span class="s2">&quot;/v1/images/7/{size}/meta&quot;</span><span class="p">,</span>
                  <span class="nt">&quot;templated&quot;</span><span class="p">:</span><span class="kc">true</span>
               <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;imageId&quot;</span><span class="p">:</span><span class="mi">7</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;downloading&quot;</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="nt">&quot;_links&quot;</span><span class="p">:{</span>
               <span class="nt">&quot;self&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;href&quot;</span><span class="p">:</span><span class="s2">&quot;/v1/images/8&quot;</span>
               <span class="p">},</span>
               <span class="nt">&quot;mp:image-blob&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;href&quot;</span><span class="p">:</span><span class="s2">&quot;/v1/images/8/{size}/blob&quot;</span><span class="p">,</span>
                  <span class="nt">&quot;templated&quot;</span><span class="p">:</span><span class="kc">true</span>
               <span class="p">},</span>
               <span class="nt">&quot;mp:image-meta&quot;</span><span class="p">:{</span>
                  <span class="nt">&quot;href&quot;</span><span class="p">:</span><span class="s2">&quot;/v1/images/8/{size}/meta&quot;</span><span class="p">,</span>
                  <span class="nt">&quot;templated&quot;</span><span class="p">:</span><span class="kc">true</span>
               <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;imageId&quot;</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span>
            <span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;downloading&quot;</span>
         <span class="p">}</span>
      <span class="p">]</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Uploading images is an asynchronous process. You provide us with urls from where the images can
be retrieved and we download the these images when there is capacity available. Usually this
will be pretty quick.</p>
<div class="configuration-block">
<ul class="simple">
<li><em>CURL</em><div class="highlight-curl"><div class="highlight"><pre>curl <span class="s1">&#39;http://api.marktplaats.nl/v1/advertisements/m1000/images&#39;</span> <span class="se">\</span>
 -H <span class="s1">&#39;Authorization: Bearer myaccesstoken&#39;</span> <span class="se">\</span>
 -H <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\</span>
 --data-binary <span class="s1">$&#39;{&quot;urls&quot;: [ &quot;http://www.marktplaats.nl/i/common/images/marktplaats-logo.png&quot;, &quot;http://www.marktplaats.nl/i/common/images/mensen.jpg&quot; ], &quot;replaceAll&quot;: true}&#39;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">// php example goes here</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Most of the time. This is all there is to it, and at this point you can continue with
posting other ads or buying features.</p>
<p>But if you want to make absolutely sure that images have finished downloading before
continuing then you can poll the individual image resources by doing a <tt class="docutils literal"><span class="pre">GET</span></tt> request to
the image endpoint.</p>
<div class="highlight-http"><div class="highlight"><pre><span class="nf">GET</span> <span class="nn">/v1/images/8</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.marktplaats.nl</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">Bearer myaccesstoken</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
    <span class="nt">&quot;_links&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;curies&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="nt">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;https://api.marktplaats.nl/docs/v1/rels/{rel}.html&quot;</span><span class="p">,</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;mp&quot;</span><span class="p">,</span>
                <span class="nt">&quot;templated&quot;</span><span class="p">:</span> <span class="kc">true</span>
            <span class="p">}</span>
        <span class="p">],</span>
        <span class="nt">&quot;describedby&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;https://api.marktplaats.nl/docs/v1/image.html&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;mp:image-blob&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;/v1/images/8/{size}/blob&quot;</span><span class="p">,</span>
            <span class="nt">&quot;templated&quot;</span><span class="p">:</span> <span class="kc">true</span>
        <span class="p">},</span>
        <span class="nt">&quot;mp:image-meta&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;/v1/images/8/{size}/meta&quot;</span><span class="p">,</span>
            <span class="nt">&quot;templated&quot;</span><span class="p">:</span> <span class="kc">true</span>
        <span class="p">},</span>
        <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;/v1/images/8&quot;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;imageId&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;available&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When the status field changes from <tt class="docutils literal"><span class="pre">downloading</span></tt> to <tt class="docutils literal"><span class="pre">available</span></tt> then the image
has been successfully downloaded and attached to the advertisement</p>
<div class="configuration-block">
<ul class="simple">
<li><em>CURL</em><div class="highlight-curl"><div class="highlight"><pre>curl <span class="s1">&#39;http://api.marktplaats.nl/v1/images/8&#39;</span> <span class="se">\</span>
 -H <span class="s1">&#39;Authorization: Bearer myaccesstoken&#39;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">// php example goes here</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="step-4-buying-features">
<h2>Step 4: Buying features<a class="headerlink" href="#step-4-buying-features" title="Permalink to this headline">¶</a></h2>
<p>Immediately after successfully creating an advertisement it becomes possible to purchase
features that make your advertisement stand out.</p>
<p>To get all list of all features that can be bought for an advertisement we do a
GET request on the features endpoint</p>
<div class="highlight-http"><div class="highlight"><pre><span class="nf">GET</span> <span class="nn">/v1/advertisements/m1000/features</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.marktplaats.nl</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">Bearer myaccesstoken</span>
</pre></div>
</div>
<p>The response is a JSON object that lists all possible features for an advertisement</p>
<div class="highlight-http"><div class="highlight"><pre><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;_links&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;/v1/advertisements/m1000/features&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;curies&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;https://api.marktplaats.nl/docs/v1/rels/{rel}.html&quot;</span><span class="p">,</span>
        <span class="nt">&quot;templated&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;mp&quot;</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&quot;_embedded&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;mp:advertisement-feature&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&quot;_links&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;/v1/advertisements/m1000/features/fotoknaller&quot;</span>
          <span class="p">},</span>
          <span class="nt">&quot;mp:buy-advertisement-feature&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;/v1/advertisements/m1000/features/fotoknaller/buy-feature&quot;</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;fotoknaller&quot;</span><span class="p">,</span>
        <span class="nt">&quot;price&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
        <span class="nt">&quot;available&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;active&quot;</span><span class="p">:</span> <span class="kc">false</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;_links&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;/v1/advertisements/m1000/features/url&quot;</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;url&quot;</span><span class="p">,</span>
        <span class="nt">&quot;price&quot;</span><span class="p">:</span> <span class="mi">900</span><span class="p">,</span>
        <span class="nt">&quot;available&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;active&quot;</span><span class="p">:</span> <span class="kc">true</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;_links&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;/v1/advertisements/m1000/features/dagtopper&quot;</span>
          <span class="p">},</span>
          <span class="nt">&quot;mp:buy-advertisement-feature&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;/v1/advertisements/m1000/features/dagtopper/buy-feature&quot;</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;dagtopper&quot;</span><span class="p">,</span>
        <span class="nt">&quot;price&quot;</span><span class="p">:</span> <span class="mi">151</span><span class="p">,</span>
        <span class="nt">&quot;available&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;active&quot;</span><span class="p">:</span> <span class="kc">false</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;_links&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;/v1/advertisements/m1000/features/omhoogplaatsen&quot;</span>
          <span class="p">},</span>
          <span class="nt">&quot;mp:buy-advertisement-feature&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;/v1/advertisements/m1000/features/omhoogplaatsen/buy-feature&quot;</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;omhoogplaatsen&quot;</span><span class="p">,</span>
        <span class="nt">&quot;price&quot;</span><span class="p">:</span> <span class="mi">130</span><span class="p">,</span>
        <span class="nt">&quot;available&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;active&quot;</span><span class="p">:</span> <span class="kc">false</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;_links&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;/v1/advertisements/m1000/features/topadvertentie&quot;</span>
          <span class="p">},</span>
          <span class="nt">&quot;mp:buy-advertisement-feature&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;/v1/advertisements/m1000/features/topadvertentie/buy-feature&quot;</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;topadvertentie&quot;</span><span class="p">,</span>
        <span class="nt">&quot;price&quot;</span><span class="p">:</span> <span class="mi">1100</span><span class="p">,</span>
        <span class="nt">&quot;available&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;active&quot;</span><span class="p">:</span> <span class="kc">false</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;_links&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;/v1/advertisements/m1000/features/videoopvaller&quot;</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;videoopvaller&quot;</span><span class="p">,</span>
        <span class="nt">&quot;price&quot;</span><span class="p">:</span> <span class="mi">105</span><span class="p">,</span>
        <span class="nt">&quot;available&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;active&quot;</span><span class="p">:</span> <span class="kc">false</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;_links&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;self&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;/v1/advertisements/m1000/features/blikvanger&quot;</span>
          <span class="p">},</span>
          <span class="nt">&quot;mp:buy-advertisement-feature&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;href&quot;</span><span class="p">:</span> <span class="s2">&quot;/v1/advertisements/m1000/features/blikvanger/buy-feature&quot;</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;blikvanger&quot;</span><span class="p">,</span>
        <span class="nt">&quot;price&quot;</span><span class="p">:</span> <span class="mi">4500</span><span class="p">,</span>
        <span class="nt">&quot;available&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;active&quot;</span><span class="p">:</span> <span class="kc">false</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If the available field of an embedded feature is set to true, this feature is available
for purchase. If we look at the example output above you can see that the
<tt class="docutils literal"><span class="pre">topadvertentie</span></tt> feature is available but the <tt class="docutils literal"><span class="pre">url</span></tt> feature is not. In this case the
<tt class="docutils literal"><span class="pre">url</span></tt> feature is unavailable because it has already been bought. We know this because
the active field is set to true.</p>
<p>It is worth noting that the prices (in cents) are the prices that users of the
marktplaats website would pay. In many cases other arrangements have been made with api
partners and these arrangements are <em>not</em> reflected in the price</p>
<p>Let&#8217;s continue and buy the <tt class="docutils literal"><span class="pre">topadvertentie</span></tt>. To do this we we do a <tt class="docutils literal"><span class="pre">POST</span></tt> request
to the features endpoint</p>
<div class="highlight-http"><div class="highlight"><pre><span class="nf">POST</span> <span class="nn">/v1/advertisements/m1000/features/topadvertentie/buy-feature</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.marktplaats.nl</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
    <span class="nt">&quot;pay&quot;</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If the call is successful then an order will be returned and the feature is now active. It might however still take a
few minutes before all of the features that you have bought are visible on the website</p>
<div class="configuration-block">
<ul class="simple">
<li><em>CURL</em><div class="highlight-curl"><div class="highlight"><pre>curl <span class="s1">&#39;https://api.marktplaats.nl/v1/advertisements/m1000/features/topadvertentie/buy-feature&#39;</span> <span class="se">\</span>
 -H <span class="s1">&#39;Authorization: Bearer myaccesstoken&#39;</span> <span class="se">\</span>
 -H <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\</span>
 --data-binary <span class="s1">&#39;{ &quot;pay&quot;:true }&#39;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">// php example goes here</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="step-5-updating-the-advertisement">
<h2>Step 5: Updating the advertisement<a class="headerlink" href="#step-5-updating-the-advertisement" title="Permalink to this headline">¶</a></h2>
<p>It is possible to change an advertisement after it has been created. However not all properties of an advertisement are
updatable, even when these same properties where editable on creation. So be sure to look both at the advertisement
<a class="reference external" href="http://api.marktplaats.dev/docs/v1/advertisement.html#attributes-optional-fields">attributes documentation in the reference documentation</a>
and at the category attributes (see step 1 of this guide) before attempting to update a property.
Only attributes that are marked as updateable can be changed.</p>
<p>An advertisement can be updated in two different ways. You can do a full update, by
performing a <tt class="docutils literal"><span class="pre">PUT</span></tt> request, or a partial update, by doing a <tt class="docutils literal"><span class="pre">PATCH</span></tt> request against the advertisement endpoint</p>
<p>Lets demonstrate a the former case first.</p>
<div class="highlight-http"><div class="highlight"><pre><span class="nf">PUT</span> <span class="nn">/v1/advertisements/m1000</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.marktplaats.nl</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;itemId&quot;</span><span class="p">:</span> <span class="s2">&quot;m1000&quot;</span><span class="p">,</span>
  <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Updated title&quot;</span><span class="p">,</span>
  <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;This is an awesome cd-player&quot;</span><span class="p">,</span>
  <span class="nt">&quot;categoryId&quot;</span><span class="p">:</span> <span class="mi">35</span><span class="p">,</span>
  <span class="nt">&quot;priceModel&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;modelType&quot;</span><span class="p">:</span> <span class="s2">&quot;fixed&quot;</span><span class="p">,</span>
    <span class="nt">&quot;askingPrice&quot;</span><span class="p">:</span> <span class="mi">3241</span>
  <span class="p">},</span>
  <span class="nt">&quot;location&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;postcode&quot;</span><span class="p">:</span> <span class="s2">&quot;1097DN&quot;</span><span class="p">,</span>
    <span class="nt">&quot;cityName&quot;</span><span class="p">:</span> <span class="s2">&quot;Amsterdam&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;seller&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;sellerId&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nt">&quot;sellerName&quot;</span><span class="p">:</span> <span class="s2">&quot;Robin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;phoneNumber&quot;</span><span class="p">:</span> <span class="s2">&quot;020-4167248&quot;</span><span class="p">,</span>
    <span class="nt">&quot;acceptPaypal&quot;</span><span class="p">:</span> <span class="kc">false</span>
  <span class="p">},</span>
  <span class="nt">&quot;showOnMap&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;online&quot;</span><span class="p">,</span>
  <span class="nt">&quot;startDate&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-12-23T16:59:39Z&quot;</span><span class="p">,</span>
  <span class="nt">&quot;closeDate&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-01-23T16:59:39Z&quot;</span><span class="p">,</span>
  <span class="nt">&quot;condition&quot;</span><span class="p">:</span> <span class="s2">&quot;Nieuw&quot;</span><span class="p">,</span>
  <span class="nt">&quot;brand&quot;</span><span class="p">:</span> <span class="s2">&quot;Sony&quot;</span><span class="p">,</span>
  <span class="nt">&quot;properties&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;Draagbaar&quot;</span>
  <span class="p">],</span>
  <span class="nt">&quot;delivery&quot;</span><span class="p">:</span> <span class="s2">&quot;Ophalen&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="configuration-block">
<ul class="simple">
<li><em>CURL</em><div class="highlight-curl"><div class="highlight"><pre>curl <span class="s1">&#39;https://api.marktplaats.nl/v1/advertisements/m1000&#39;</span> <span class="se">\</span>
 -X PUT -H <span class="s1">&#39;Authorization: Bearer myaccesstoken&#39;</span> <span class="se">\</span>
 -H <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\</span>
 --data-binary <span class="s1">$&#39;{\n  &quot;itemId&quot;: &quot;m1000&quot;,\n  &quot;title&quot;: &quot;Test cd player&quot;,\n  &quot;description&quot;: &quot;This is an awesome cd-player&quot;,\n  &quot;categoryId&quot;: 35,\n  &quot;priceModel&quot;: {\n    &quot;modelType&quot;: &quot;fixed&quot;,\n    &quot;askingPrice&quot;: 3241\n  },\n  &quot;location&quot;: {\n    &quot;postcode&quot;: &quot;1097DN&quot;,\n    &quot;cityName&quot;: &quot;Amsterdam&quot;\n  },\n  &quot;seller&quot;: {\n    &quot;sellerId&quot;: 1,\n    &quot;sellerName&quot;: &quot;lalala&quot;,\n    &quot;phoneNumber&quot;: &quot;&quot;,\n    &quot;acceptPaypal&quot;: false\n  },\n  &quot;showOnMap&quot;: false,\n  &quot;status&quot;: &quot;deactivated&quot;,\n  &quot;startDate&quot;: &quot;2014-12-23T16:59:39Z&quot;,\n  &quot;closeDate&quot;: &quot;2015-01-23T16:59:39Z&quot;,\n  &quot;condition&quot;: &quot;Nieuw&quot;,\n  &quot;brand&quot;: &quot;Sony&quot;,\n  &quot;properties&quot;: [\n    &quot;Draagbaar&quot;\n  ],\n  &quot;delivery&quot;: &quot;Ophalen&quot;\n}&#39;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">// php example goes here</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>In the above example we overwrote all the fields all at once.</p>
<p>In some cases you may only want to update only one or two fields, leaving the rest unchanged. In that case you could
perform a <tt class="docutils literal"><span class="pre">PATCH</span></tt> request instead.
The body of this <tt class="docutils literal"><span class="pre">PATCH</span></tt> request should be a JSON Patch document. JSON Patch is a standard format for describing
changes to a JSON document. A JSON Patch document is just a JSON file containing an array of patch operations.
The patch operations supported by JSONPatch are “add”, “remove”, “replace”, “move”, “copy” and “test”.
The operations are applied in order; if any of them fail then the whole patch operation should abort.</p>
<p>Covering this standard in detail is outside of the scope of this document but there is
<a class="reference external" href="https://tools.ietf.org/html/rfc6902/">extensive documentation</a> on this format available online.</p>
<p>Lets quickly take a look at what a request for updating just the title of an advertisement could look like.</p>
<div class="highlight-http"><div class="highlight"><pre>PATCH /v1/advertisements/m1000 HTTP/1.1
Host: api.marktplaats.nl
Content-Type: application/json-patch+json

[
  {&quot;op&quot;:&quot;replace&quot;, &quot;path&quot;:&quot;/title&quot;, &quot;value&quot;:&quot;the new title&quot;}
]
</pre></div>
</div>
<div class="configuration-block">
<ul class="simple">
<li><em>CURL</em><div class="highlight-curl"><div class="highlight"><pre>curl <span class="s1">&#39;https://api.marktplaats.nl/v1/advertisements/m1000&#39;</span> <span class="se">\</span>
 -X PATCH -H <span class="s1">&#39;Authorization: Bearer myaccesstoken&#39;</span> <span class="se">\</span>
 -H <span class="s1">&#39;Content-Type: application/json-patch+json&#39;</span> <span class="se">\</span>
 --data-binary <span class="s1">$&#39;[{&quot;op&quot;:&quot;replace&quot;, &quot;path&quot;:&quot;/title&quot;, &quot;value&quot;:&quot;the new title&quot;}]&#39;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">// php example goes here</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="step-6-removing-an-advertisement">
<h2>Step 6: Removing an advertisement<a class="headerlink" href="#step-6-removing-an-advertisement" title="Permalink to this headline">¶</a></h2>
<p>Removing an advertisement is straightforward. You simply do a <tt class="docutils literal"><span class="pre">DELETE</span></tt> request against the advertisement endpoint.
No Request body is required</p>
<div class="highlight-http"><div class="highlight"><pre><span class="nf">DELETE</span> <span class="nn">/v1/advertisements/m1000</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.marktplaats.nl</span>
</pre></div>
</div>
<div class="configuration-block">
<ul class="simple">
<li><em>CURL</em><div class="highlight-curl"><div class="highlight"><pre>curl <span class="s1">&#39;https://api.marktplaats.nl/v1/advertisements/m1000&#39;</span> <span class="se">\</span>
 -X DELETE -H <span class="s1">&#39;Authorization: Bearer myaccesstoken&#39;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">// php example goes here</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>This concludes the placing an advertisement section of this guide. We&#8217;ve showed you how to place an advertisement,
attach images, purchase features, update an advertisement and finally how to remove your advertisement.
In the next section we will describe how</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="buying-user-features.html" class="btn btn-neutral float-right" title="Buying User Features"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="authentication.html" class="btn btn-neutral" title="Authentication"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Marktplaats bv.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/configurationblock.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>